{"version":3,"sources":["../../../../src/api/features/users/get-all.js"],"names":["toMaybe","S","onResolve","ctx","next","users","body","status","onReject","error","getAll","params","page","take","search","UserService"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;;;AAEA,MAAM,EAAEA,OAAF,KAAcC,MAApB;;AAEA;AACA,MAAMC,YAAYC,OAAOC,QAAQC,SAAS;AACxCF,MAAIG,IAAJ,GAAWD,KAAX;AACAF,MAAII,MAAJ,GAAa,GAAb;AACAH;AACD,CAJD;;AAMA;AACA,MAAMI,WAAWL,OAAOC,QAAQK,SAAS;AACvCN,MAAIG,IAAJ,GAAWG,KAAX;AACAN,MAAII,MAAJ,GAAa,GAAb;AACAH;AACD,CAJD;;AAMA,MAAMM,SAAS,CAACP,GAAD,EAAMC,IAAN,KAAe;AAC5B,QAAMO,SAAS;AACbC,UAAM,CADO;AAEbC,UAAM,EAFO;AAGbC,YAAQd,QAAS,IAAT;AAHK,GAAf;;AAMA,SAAO,gBAAKe,sBAAYL,MAAZ,CAAoBC,MAApB,CAAL,EACKT,UAAWC,GAAX,EAAiBC,IAAjB,CADL,EAEKI,SAAWL,GAAX,EAAiBC,IAAjB,CAFL,CAAP;AAGD,CAVD;;kBAYeM,M","file":"get-all.js","sourcesContent":["import { S } from '../../../fun';\r\nimport { run } from '../../utils';\r\nimport UserService from '../../../service/user-service';\r\n\r\nconst { toMaybe } = S;\r\n\r\n// onResolve :: Context -> Next -> Void\r\nconst onResolve = ctx => next => users => {\r\n  ctx.body = users;\r\n  ctx.status = 200;\r\n  next ();\r\n};\r\n\r\n// onResolve :: Context -> Next -> Void\r\nconst onReject = ctx => next => error => {\r\n  ctx.body = error;\r\n  ctx.status = 500;\r\n  next ();\r\n};\r\n\r\nconst getAll = (ctx, next) => {\r\n  const params = {\r\n    page: 1,\r\n    take: 10,\r\n    search: toMaybe (null)\r\n  };\r\n\r\n  return run (UserService.getAll (params))\r\n             (onResolve (ctx) (next))\r\n             (onReject  (ctx) (next));\r\n};\r\n\r\nexport default getAll;"]}