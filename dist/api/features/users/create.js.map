{"version":3,"sources":["../../../../src/api/features/users/create.js"],"names":["K","ifElse","S","getErrorStatus","x","ValidationError","onResolve","ctx","next","users","body","status","onReject","error","getAll","UserService","create","request"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;AAEA,MAAM,EAAEA,CAAF,EAAKC,MAAL,KAAgBC,MAAtB;;AAEA;AACA,MAAMC,iBAAiBF,OACCG,KAAKA,aAAaC,sBADnB,EAECL,EAAG,GAAH,CAFD,EAEWA,EAAG,GAAH,CAFX,CAAvB;;AAIA;AACA,MAAMM,YAAYC,OAAOC,QAAQC,SAAS;AACxCF,MAAIG,IAAJ,GAAWD,KAAX;AACAF,MAAII,MAAJ,GAAa,GAAb;AACAH;AACD,CAJD;;AAMA;AACA,MAAMI,WAAWL,OAAOC,QAAQK,SAAS;AACvCN,MAAIG,IAAJ,GAAWG,KAAX;AACAN,MAAII,MAAJ,GAAaR,eAAgBU,KAAhB,CAAb;AACAL;AACD,CAJD;;AAMA,MAAMM,SAAS,CAACP,GAAD,EAAMC,IAAN,KACb,gBAAKO,sBAAYC,MAAZ,CAAoBT,IAAIU,OAAJ,CAAYP,IAAhC,CAAL,EACKJ,UAAWC,GAAX,EAAiBC,IAAjB,CADL,EAEKI,SAAWL,GAAX,EAAiBC,IAAjB,CAFL,CADF;;kBAMeM,M","file":"create.js","sourcesContent":["import { S } from '../../../fun';\r\nimport { run, formatValError } from '../../utils';\r\nimport UserService from '../../../service/user-service';\r\nimport { ValidationError } from '../../../common/types/error';\r\n\r\nconst { K, ifElse } = S;\r\n\r\n// getErrorStatus :: AppError -> Number\r\nconst getErrorStatus = ifElse\r\n                       (x => x instanceof ValidationError)\r\n                       (K (422)) (K (500));\r\n\r\n// onResolve :: Context -> Next -> Array Users -> Void\r\nconst onResolve = ctx => next => users => {\r\n  ctx.body = users;\r\n  ctx.status = 200;\r\n  next ();\r\n};\r\n\r\n// onReject :: Context -> Next -> AppError -> Void\r\nconst onReject = ctx => next => error => {\r\n  ctx.body = error;\r\n  ctx.status = getErrorStatus (error);\r\n  next ();\r\n};\r\n\r\nconst getAll = (ctx, next) =>\r\n  run (UserService.create (ctx.request.body))\r\n      (onResolve (ctx) (next))\r\n      (onReject  (ctx) (next));\r\n\r\n\r\nexport default getAll;"]}