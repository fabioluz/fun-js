{"version":3,"sources":["../../../../src/api/features/users/create.js"],"names":["ifElse","S","onResolve","ctx","next","users","body","status","onReject","error","isSafe","getAll","UserService","create","request"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;;;AAEA,MAAM,EAAEA,MAAF,KAAaC,MAAnB;;AAEA;AACA,MAAMC,YAAYC,OAAOC,QAAQC,SAAS;AACxCF,MAAIG,IAAJ,GAAWD,KAAX;AACAF,MAAII,MAAJ,GAAa,GAAb;AACAH;AACD,CAJD;;AAMA;AACA,MAAMI,WAAWL,OAAOC,QAAQK,SAAS;AACvCN,MAAIG,IAAJ,GAAWG,KAAX;AACAN,MAAII,MAAJ,GAAaE,MAAMC,MAAN,GAAe,GAAf,GAAqB,GAAlC;AACAN;AACD,CAJD;;AAMA,MAAMO,SAAS,CAACR,GAAD,EAAMC,IAAN,KACb,gBAAKQ,sBAAYC,MAAZ,CAAoBV,IAAIW,OAAJ,CAAYR,IAAhC,CAAL,EACKJ,UAAWC,GAAX,EAAiBC,IAAjB,CADL,EAEKI,SAAWL,GAAX,EAAiBC,IAAjB,CAFL,CADF;;kBAMeO,M","file":"create.js","sourcesContent":["import { S } from '../../../fun';\r\nimport { run, formatValError } from '../../utils';\r\nimport UserService from '../../../service/user-service';\r\n\r\nconst { ifElse } = S;\r\n\r\n// onResolve :: Context -> Next -> Void\r\nconst onResolve = ctx => next => users => {\r\n  ctx.body = users;\r\n  ctx.status = 200;\r\n  next ();\r\n};\r\n\r\n// onReject :: Context -> Next -> Void\r\nconst onReject = ctx => next => error => {\r\n  ctx.body = error;\r\n  ctx.status = error.isSafe ? 422 : 500;\r\n  next ();\r\n};\r\n\r\nconst getAll = (ctx, next) =>\r\n  run (UserService.create (ctx.request.body))\r\n      (onResolve (ctx) (next))\r\n      (onReject  (ctx) (next));\r\n\r\n\r\nexport default getAll;"]}